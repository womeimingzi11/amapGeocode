<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An Interface to the AutoNavi Maps API Geocoding Services • amapGeocode</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="An Interface to the AutoNavi Maps API Geocoding Services">
<meta property="og:description" content="Getting and parsing data of location geocode/reverse-geocode and administrative regions from AutoNavi Maps&lt;https://lbs.amap.com/api/webservice/summary&gt; API.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">amapGeocode</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/Introduction_to_amapGeocode.html">Introduction to amapGeocode</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/womeimingzi11/amapGeocode/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="amapgeocode" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#amapgeocode" class="anchor"></a><a href="https://github.com/womeimingzi11/amapGeocode">amapGeocode</a>
</h1></div>
<!-- badges: start -->

<p>中文版介绍: <a href="https://blog.washman.top/post/amapgeocode-%E4%BD%BF%E7%94%A8r%E8%BF%9B%E8%A1%8C%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E5%9C%B0%E7%90%86%E7%BC%96%E7%A0%81-%E9%80%86%E7%BC%96%E7%A0%81.zh-hans/">博客</a> or <a href="https://zhuanlan.zhihu.com/p/264281505">知乎</a></p>
<div id="introduction-" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction-" class="anchor"></a>Introduction <img src="reference/figures/hexSticker-logo.png" align="right" width="100">
</h2>
<p>Geocoding and Reverse Geocoding Services are widely used to provide data about coordinate and location information, including longitude, latitude, formatted location name, administrative region with different levels. There are some packages can provide geocode service such as <a href="https://CRAN.R-project.org/package=tidygeocoder">tidygeocoder</a>, <a href="https://github.com/badbye/baidumap">baidumap</a> and <a href="https://github.com/ChrisMuir/baidugeo">baidugeo</a>. However, some of them do not always provide precise information in China, and some of them are unavailable with the upgrade backend API.</p>
<p>amapGeocode is built to provide high precise geocoding and reverse geocoding service, and it provides an interface for the AutoNavi(高德) Maps API geocoding services. API docs can be found <a href="https://lbs.amap.com/">here</a> and <a href="https://lbs.amap.com/api/webservice/summary/">here</a>. Here are two main functions to use, one is <code><a href="reference/getCoord.html">getCoord()</a></code> which needs a character location name as an input, while the other one is <code><a href="reference/getLocation.html">getLocation()</a></code> which needs two numeric longitude and latitude values as inputs.</p>
<p>The <code><a href="reference/getCoord.html">getCoord()</a></code> function extracts coordinate information from input character location name and outputs the results as <code>data.table</code>, <code>XML</code> or <code>JSON (as list)</code>. And the <code><a href="reference/getLocation.html">getLocation()</a></code> function extracts location information from input numeric longitude and latitude values and outputs the results as <code>data.table</code>, <code>XML</code> or <code>JSON (as list)</code>. With the <code>data.table</code> format as output, it’s highly readable and can be used as an alternative of <code>data.frame</code></p>
<p>amapGeocode is inspired by <a href="https://github.com/badbye/baidumap">baidumap</a> and <a href="https://github.com/ChrisMuir/baidugeo">baidugeo</a>. If you want to choose the Baidu Map API, these packages are good choices.</p>
<p>However, AutoNavi has significant high precise, in my case, the Results from Baidu were unsatisfactory.</p>
</div>
<div id="big-news-parallel-is-here-but-you-need-a-plan" class="section level2">
<h2 class="hasAnchor">
<a href="#big-news-parallel-is-here-but-you-need-a-plan" class="anchor"></a>BIG NEWS: Parallel is Here! But you need a <code>plan</code>
</h2>
<p>Since <code>v0.5.1</code>, parallel framework is implemented by <a href="https://CRAN.R-project.org/package=furrr"><code>furrr</code> package</a>, of which backend is <a href="https://arxiv.org/abs/2008.00553"><code>future package</code></a>. Refering to <a href="https://cran.r-project.org/web/packages/future/vignettes/future-7-for-package-developers.html"><em>A Future for R: Best Practices for Package Developers</em></a> and avoiding potential modification to the future strategy, we have removed the automatically parallel operation from every function in <code>amapGeocode</code>.</p>
<p>To turn on parallel operation support, just call <code><a href="https://rdrr.io/pkg/future/man/plan.html">future::plan(multisession) # or any other future strategy</a></code>.</p>
<p>Since <code>v0.5</code>, parallel operation finally comes to <code>amapGeocode</code> with the <code>parallel</code> package as the backend. There is a really huge performance improvement for batch queries. And you are welcomed to make a benchmark by following command.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/womeimingzi11/amapGeocode">amapGeocode</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/HenrikBengtsson/future">future</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">readr</span><span class="op">)</span>
<span class="va">sample_site</span> <span class="op">&lt;-</span>
  <span class="fu">read_csv</span><span class="op">(</span><span class="st">"https://gist.githubusercontent.com/womeimingzi11/0fa3f4744f3ebc0f4484a52649f556e5/raw/47a69157f3e26c4d3bc993f3715b9ba88cda9d93/sample_site.csv"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">sample_site</span><span class="op">)</span>

<span class="co"># Here is the old implement</span>
<span class="va">start_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/proc.time.html">proc.time</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">old</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">sample_site</span><span class="op">$</span><span class="va">address</span>, <span class="fu">amapGeocode</span><span class="fu">:::</span><span class="va"><a href="reference/getCoord.individual.html">getCoord.individual</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/proc.time.html">proc.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="va">start_time</span>

<span class="co"># Here is the new implement</span>
<span class="fu"><a href="https://rdrr.io/pkg/future/man/plan.html">plan</a></span><span class="op">(</span><span class="va">multisession</span><span class="op">)</span>
<span class="va">start_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/proc.time.html">proc.time</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">new</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/getCoord.html">getCoord</a></span><span class="op">(</span><span class="va">sample_site</span><span class="op">$</span><span class="va">address</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/proc.time.html">proc.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="va">start_time</span></code></pre></div>
<p><em>While parallel support is a totally threads depending operation, so you will get completely different speed on different devices.</em></p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the released version of amapGeocode from <a href="https://CRAN.R-project.org/package=amapGeocode">CRAN</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"amapGeocode"</span><span class="op">)</span></code></pre></div>
<p>To install the development version, run following command:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">'womeimingzi11/amapGeocode'</span><span class="op">)</span></code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<div id="geocoding" class="section level3">
<h3 class="hasAnchor">
<a href="#geocoding" class="anchor"></a>Geocoding</h3>
<p>Before start geocoding and reverse geocoding, please apply a <a href="https://lbs.amap.com/dev/">AutoNavi Map API Key</a>. Set <code>amap_key</code> globally by following command:</p>
<p>Then get results of geocoding, by <code>getCoord</code> function.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/womeimingzi11/amapGeocode">amapGeocode</a></span><span class="op">)</span>
<span class="co"># An individual request</span>
<span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/getCoord.html">getCoord</a></span><span class="op">(</span><span class="st">"四川省中医院"</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="7%">
<col width="6%">
<col width="24%">
<col width="6%">
<col width="7%">
<col width="6%">
<col width="7%">
<col width="7%">
<col width="6%">
<col width="6%">
<col width="7%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="right">lng</th>
<th align="right">lat</th>
<th align="left">formatted_address</th>
<th align="left">country</th>
<th align="left">province</th>
<th align="left">city</th>
<th align="left">district</th>
<th align="left">township</th>
<th align="left">street</th>
<th align="left">number</th>
<th align="left">citycode</th>
<th align="left">adcode</th>
</tr></thead>
<tbody><tr class="odd">
<td align="right">104.0431</td>
<td align="right">30.6678</td>
<td align="left">四川省成都市金牛区四川省中医院</td>
<td align="left">中国</td>
<td align="left">四川省</td>
<td align="left">成都市</td>
<td align="left">金牛区</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">028</td>
<td align="left">510106</td>
</tr></tbody>
</table>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Batch requests</span>
<span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/getCoord.html">getCoord</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"四川省中医院"</span>, <span class="st">"四川省人民医院"</span>, <span class="st">"成都中医药大学十二桥校区"</span><span class="op">)</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="6%">
<col width="6%">
<col width="30%">
<col width="6%">
<col width="6%">
<col width="5%">
<col width="6%">
<col width="6%">
<col width="5%">
<col width="5%">
<col width="6%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th align="right">lng</th>
<th align="right">lat</th>
<th align="left">formatted_address</th>
<th align="left">country</th>
<th align="left">province</th>
<th align="left">city</th>
<th align="left">district</th>
<th align="left">township</th>
<th align="left">street</th>
<th align="left">number</th>
<th align="left">citycode</th>
<th align="left">adcode</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">104.0431</td>
<td align="right">30.66780</td>
<td align="left">四川省成都市金牛区四川省中医院</td>
<td align="left">中国</td>
<td align="left">四川省</td>
<td align="left">成都市</td>
<td align="left">金牛区</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">028</td>
<td align="left">510106</td>
</tr>
<tr class="even">
<td align="right">104.0390</td>
<td align="right">30.66362</td>
<td align="left">四川省成都市青羊区四川省人民医院</td>
<td align="left">中国</td>
<td align="left">四川省</td>
<td align="left">成都市</td>
<td align="left">青羊区</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">028</td>
<td align="left">510105</td>
</tr>
<tr class="odd">
<td align="right">104.0439</td>
<td align="right">30.66629</td>
<td align="left">四川省成都市金牛区成都中医药大学十二桥校区</td>
<td align="left">中国</td>
<td align="left">四川省</td>
<td align="left">成都市</td>
<td align="left">金牛区</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">028</td>
<td align="left">510106</td>
</tr>
</tbody>
</table>
<p>The responses we get from <strong>AutoNavi Map API</strong> is <strong>JSON</strong> or <strong>XML</strong>. For readability, we transform them to <a href="https://CRAN.R-project.org/package=data.table"><code>data.table</code></a>, by setting <code>output</code> argument as <code>data.table</code> by default.</p>
<p>If you want to extract information from <strong>JSON</strong> or <strong>XML</strong>. The results can further be parsed by <code>extractCoord</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># An individual request</span>
<span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/getCoord.html">getCoord</a></span><span class="op">(</span><span class="st">"成都中医药大学"</span>, output <span class="op">=</span> <span class="st">"JSON"</span><span class="op">)</span>
<span class="va">res</span>
<span class="co">#&gt; $status</span>
<span class="co">#&gt; [1] "1"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $info</span>
<span class="co">#&gt; [1] "OK"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $infocode</span>
<span class="co">#&gt; [1] "10000"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $count</span>
<span class="co">#&gt; [1] "1"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $geocodes</span>
<span class="co">#&gt; $geocodes[[1]]</span>
<span class="co">#&gt; $geocodes[[1]]$formatted_address</span>
<span class="co">#&gt; [1] "四川省成都市金牛区成都中医药大学"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $geocodes[[1]]$country</span>
<span class="co">#&gt; [1] "中国"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $geocodes[[1]]$province</span>
<span class="co">#&gt; [1] "四川省"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $geocodes[[1]]$citycode</span>
<span class="co">#&gt; [1] "028"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $geocodes[[1]]$city</span>
<span class="co">#&gt; [1] "成都市"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $geocodes[[1]]$district</span>
<span class="co">#&gt; [1] "金牛区"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $geocodes[[1]]$township</span>
<span class="co">#&gt; list()</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $geocodes[[1]]$neighborhood</span>
<span class="co">#&gt; $geocodes[[1]]$neighborhood$name</span>
<span class="co">#&gt; list()</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $geocodes[[1]]$neighborhood$type</span>
<span class="co">#&gt; list()</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $geocodes[[1]]$building</span>
<span class="co">#&gt; $geocodes[[1]]$building$name</span>
<span class="co">#&gt; list()</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $geocodes[[1]]$building$type</span>
<span class="co">#&gt; list()</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $geocodes[[1]]$adcode</span>
<span class="co">#&gt; [1] "510106"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $geocodes[[1]]$street</span>
<span class="co">#&gt; list()</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $geocodes[[1]]$number</span>
<span class="co">#&gt; list()</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $geocodes[[1]]$location</span>
<span class="co">#&gt; [1] "104.043284,30.666864"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $geocodes[[1]]$level</span>
<span class="co">#&gt; [1] "兴趣点"</span></code></pre></div>
<p><code>extractCoord</code> is created to get a result as a data.table.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tb</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/extractCoord.html">extractCoord</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">tb</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="7%">
<col width="7%">
<col width="25%">
<col width="6%">
<col width="7%">
<col width="5%">
<col width="7%">
<col width="7%">
<col width="5%">
<col width="5%">
<col width="7%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th align="right">lng</th>
<th align="right">lat</th>
<th align="left">formatted_address</th>
<th align="left">country</th>
<th align="left">province</th>
<th align="left">city</th>
<th align="left">district</th>
<th align="left">township</th>
<th align="left">street</th>
<th align="left">number</th>
<th align="left">citycode</th>
<th align="left">adcode</th>
</tr></thead>
<tbody><tr class="odd">
<td align="right">104.0433</td>
<td align="right">30.66686</td>
<td align="left">四川省成都市金牛区成都中医药大学</td>
<td align="left">中国</td>
<td align="left">四川省</td>
<td align="left">成都市</td>
<td align="left">金牛区</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">028</td>
<td align="left">510106</td>
</tr></tbody>
</table>
</div>
<div id="reverse-geocoding" class="section level3">
<h3 class="hasAnchor">
<a href="#reverse-geocoding" class="anchor"></a>Reverse Geocoding</h3>
<p>get results of reverse geocoding, by <code>getLocation</code> function.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/getLocation.html">getLocation</a></span><span class="op">(</span><span class="fl">104.043284</span>, <span class="fl">30.666864</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">formatted_address</th>
<th align="left">country</th>
<th align="left">province</th>
<th align="left">city</th>
<th align="left">district</th>
<th align="left">township</th>
<th align="left">citycode</th>
<th align="left">towncode</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">四川省成都市金牛区西安路街道成都中医药大学附属医院腹泻门诊成都中医药大学十二桥校区</td>
<td align="left">中国</td>
<td align="left">四川省</td>
<td align="left">成都市</td>
<td align="left">金牛区</td>
<td align="left">西安路街道</td>
<td align="left">028</td>
<td align="left">510106024000</td>
</tr></tbody>
</table>
<p><code>extractLocation</code> is created to get a result as a data.table.</p>
</div>
<div id="get-subordinate-administrative-region" class="section level3">
<h3 class="hasAnchor">
<a href="#get-subordinate-administrative-region" class="anchor"></a>Get Subordinate Administrative Region</h3>
<p>get results of reverse geocoding, by <code>getAdmin</code> function.</p>
<p>There is a difference between getAdmin and other function, no matter the <code>output</code> argument is <code>data.table</code> or not, the result won’t be a jointed table by different parent administrative region. For example, with the <code>output = data.table</code>, all the lower level administrative region of Province A and Province B will be bound as one data.table, respectively. But the table of province A and table of province B won’t be bound further.</p>
<p>Because this function supports different administrative region levels, it is nonsense to bind their results.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/getAdmin.html">getAdmin</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"四川省"</span>, <span class="st">"成都市"</span>, <span class="st">"济宁市"</span><span class="op">)</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></code></pre></div>
<table class="table kable_wrapper"><tbody><tr>
<td>
<table class="table">
<thead><tr class="header">
<th align="right">lng</th>
<th align="right">lat</th>
<th align="left">name</th>
<th align="left">level</th>
<th align="left">citycode</th>
<th align="left">adcode</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">106.7537</td>
<td align="right">31.85881</td>
<td align="left">巴中市</td>
<td align="left">city</td>
<td align="left">0827</td>
<td align="left">511900</td>
</tr>
<tr class="even">
<td align="right">104.0657</td>
<td align="right">30.65946</td>
<td align="left">成都市</td>
<td align="left">city</td>
<td align="left">028</td>
<td align="left">510100</td>
</tr>
<tr class="odd">
<td align="right">105.8298</td>
<td align="right">32.43367</td>
<td align="left">广元市</td>
<td align="left">city</td>
<td align="left">0839</td>
<td align="left">510800</td>
</tr>
<tr class="even">
<td align="right">106.0830</td>
<td align="right">30.79528</td>
<td align="left">南充市</td>
<td align="left">city</td>
<td align="left">0817</td>
<td align="left">511300</td>
</tr>
<tr class="odd">
<td align="right">104.3987</td>
<td align="right">31.12799</td>
<td align="left">德阳市</td>
<td align="left">city</td>
<td align="left">0838</td>
<td align="left">510600</td>
</tr>
<tr class="even">
<td align="right">104.7417</td>
<td align="right">31.46402</td>
<td align="left">绵阳市</td>
<td align="left">city</td>
<td align="left">0816</td>
<td align="left">510700</td>
</tr>
<tr class="odd">
<td align="right">105.5713</td>
<td align="right">30.51331</td>
<td align="left">遂宁市</td>
<td align="left">city</td>
<td align="left">0825</td>
<td align="left">510900</td>
</tr>
<tr class="even">
<td align="right">104.6419</td>
<td align="right">30.12221</td>
<td align="left">资阳市</td>
<td align="left">city</td>
<td align="left">0832</td>
<td align="left">512000</td>
</tr>
<tr class="odd">
<td align="right">106.6334</td>
<td align="right">30.45640</td>
<td align="left">广安市</td>
<td align="left">city</td>
<td align="left">0826</td>
<td align="left">511600</td>
</tr>
<tr class="even">
<td align="right">105.0661</td>
<td align="right">29.58708</td>
<td align="left">内江市</td>
<td align="left">city</td>
<td align="left">1832</td>
<td align="left">511000</td>
</tr>
<tr class="odd">
<td align="right">107.5023</td>
<td align="right">31.20948</td>
<td align="left">达州市</td>
<td align="left">city</td>
<td align="left">0818</td>
<td align="left">511700</td>
</tr>
<tr class="even">
<td align="right">103.8318</td>
<td align="right">30.04832</td>
<td align="left">眉山市</td>
<td align="left">city</td>
<td align="left">1833</td>
<td align="left">511400</td>
</tr>
<tr class="odd">
<td align="right">104.7734</td>
<td align="right">29.35277</td>
<td align="left">自贡市</td>
<td align="left">city</td>
<td align="left">0813</td>
<td align="left">510300</td>
</tr>
<tr class="even">
<td align="right">105.4433</td>
<td align="right">28.88914</td>
<td align="left">泸州市</td>
<td align="left">city</td>
<td align="left">0830</td>
<td align="left">510500</td>
</tr>
<tr class="odd">
<td align="right">104.6308</td>
<td align="right">28.76019</td>
<td align="left">宜宾市</td>
<td align="left">city</td>
<td align="left">0831</td>
<td align="left">511500</td>
</tr>
<tr class="even">
<td align="right">103.7613</td>
<td align="right">29.58202</td>
<td align="left">乐山市</td>
<td align="left">city</td>
<td align="left">0833</td>
<td align="left">511100</td>
</tr>
<tr class="odd">
<td align="right">101.7160</td>
<td align="right">26.58045</td>
<td align="left">攀枝花市</td>
<td align="left">city</td>
<td align="left">0812</td>
<td align="left">510400</td>
</tr>
<tr class="even">
<td align="right">102.2587</td>
<td align="right">27.88676</td>
<td align="left">凉山彝族自治州</td>
<td align="left">city</td>
<td align="left">0834</td>
<td align="left">513400</td>
</tr>
<tr class="odd">
<td align="right">103.0010</td>
<td align="right">29.98772</td>
<td align="left">雅安市</td>
<td align="left">city</td>
<td align="left">0835</td>
<td align="left">511800</td>
</tr>
<tr class="even">
<td align="right">102.2214</td>
<td align="right">31.89979</td>
<td align="left">阿坝藏族羌族自治州</td>
<td align="left">city</td>
<td align="left">0837</td>
<td align="left">513200</td>
</tr>
<tr class="odd">
<td align="right">101.9638</td>
<td align="right">30.05066</td>
<td align="left">甘孜藏族自治州</td>
<td align="left">city</td>
<td align="left">0836</td>
<td align="left">513300</td>
</tr>
</tbody>
</table>
</td>
<td>
<table class="table">
<thead><tr class="header">
<th align="right">lng</th>
<th align="right">lat</th>
<th align="left">name</th>
<th align="left">level</th>
<th align="left">citycode</th>
<th align="left">adcode</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">103.6279</td>
<td align="right">30.99114</td>
<td align="left">都江堰市</td>
<td align="left">district</td>
<td align="left">028</td>
<td align="left">510181</td>
</tr>
<tr class="even">
<td align="right">103.9412</td>
<td align="right">30.98516</td>
<td align="left">彭州市</td>
<td align="left">district</td>
<td align="left">028</td>
<td align="left">510182</td>
</tr>
<tr class="odd">
<td align="right">103.5224</td>
<td align="right">30.58660</td>
<td align="left">大邑县</td>
<td align="left">district</td>
<td align="left">028</td>
<td align="left">510129</td>
</tr>
<tr class="even">
<td align="right">104.2549</td>
<td align="right">30.88344</td>
<td align="left">青白江区</td>
<td align="left">district</td>
<td align="left">028</td>
<td align="left">510113</td>
</tr>
<tr class="odd">
<td align="right">103.6710</td>
<td align="right">30.63148</td>
<td align="left">崇州市</td>
<td align="left">district</td>
<td align="left">028</td>
<td align="left">510184</td>
</tr>
<tr class="even">
<td align="right">104.5503</td>
<td align="right">30.39067</td>
<td align="left">简阳市</td>
<td align="left">district</td>
<td align="left">028</td>
<td align="left">510185</td>
</tr>
<tr class="odd">
<td align="right">103.5115</td>
<td align="right">30.19436</td>
<td align="left">蒲江县</td>
<td align="left">district</td>
<td align="left">028</td>
<td align="left">510131</td>
</tr>
<tr class="even">
<td align="right">104.4156</td>
<td align="right">30.85842</td>
<td align="left">金堂县</td>
<td align="left">district</td>
<td align="left">028</td>
<td align="left">510121</td>
</tr>
<tr class="odd">
<td align="right">103.8124</td>
<td align="right">30.41428</td>
<td align="left">新津区</td>
<td align="left">district</td>
<td align="left">028</td>
<td align="left">510118</td>
</tr>
<tr class="even">
<td align="right">103.4614</td>
<td align="right">30.41327</td>
<td align="left">邛崃市</td>
<td align="left">district</td>
<td align="left">028</td>
<td align="left">510183</td>
</tr>
<tr class="odd">
<td align="right">103.8368</td>
<td align="right">30.69800</td>
<td align="left">温江区</td>
<td align="left">district</td>
<td align="left">028</td>
<td align="left">510115</td>
</tr>
<tr class="even">
<td align="right">104.0517</td>
<td align="right">30.63086</td>
<td align="left">武侯区</td>
<td align="left">district</td>
<td align="left">028</td>
<td align="left">510107</td>
</tr>
<tr class="odd">
<td align="right">103.9227</td>
<td align="right">30.57324</td>
<td align="left">双流区</td>
<td align="left">district</td>
<td align="left">028</td>
<td align="left">510116</td>
</tr>
<tr class="even">
<td align="right">103.8878</td>
<td align="right">30.80875</td>
<td align="left">郫都区</td>
<td align="left">district</td>
<td align="left">028</td>
<td align="left">510117</td>
</tr>
<tr class="odd">
<td align="right">104.0435</td>
<td align="right">30.69206</td>
<td align="left">金牛区</td>
<td align="left">district</td>
<td align="left">028</td>
<td align="left">510106</td>
</tr>
<tr class="even">
<td align="right">104.1602</td>
<td align="right">30.82422</td>
<td align="left">新都区</td>
<td align="left">district</td>
<td align="left">028</td>
<td align="left">510114</td>
</tr>
<tr class="odd">
<td align="right">104.2692</td>
<td align="right">30.56065</td>
<td align="left">龙泉驿区</td>
<td align="left">district</td>
<td align="left">028</td>
<td align="left">510112</td>
</tr>
<tr class="even">
<td align="right">104.1031</td>
<td align="right">30.66027</td>
<td align="left">成华区</td>
<td align="left">district</td>
<td align="left">028</td>
<td align="left">510108</td>
</tr>
<tr class="odd">
<td align="right">104.0557</td>
<td align="right">30.66765</td>
<td align="left">青羊区</td>
<td align="left">district</td>
<td align="left">028</td>
<td align="left">510105</td>
</tr>
<tr class="even">
<td align="right">104.0810</td>
<td align="right">30.65769</td>
<td align="left">锦江区</td>
<td align="left">district</td>
<td align="left">028</td>
<td align="left">510104</td>
</tr>
</tbody>
</table>
</td>
<td>
<table class="table">
<thead><tr class="header">
<th align="right">lng</th>
<th align="right">lat</th>
<th align="left">name</th>
<th align="left">level</th>
<th align="left">citycode</th>
<th align="left">adcode</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">116.9919</td>
<td align="right">35.59279</td>
<td align="left">曲阜市</td>
<td align="left">district</td>
<td align="left">0537</td>
<td align="left">370881</td>
</tr>
<tr class="even">
<td align="right">116.4871</td>
<td align="right">35.72175</td>
<td align="left">汶上县</td>
<td align="left">district</td>
<td align="left">0537</td>
<td align="left">370830</td>
</tr>
<tr class="odd">
<td align="right">116.9667</td>
<td align="right">35.40526</td>
<td align="left">邹城市</td>
<td align="left">district</td>
<td align="left">0537</td>
<td align="left">370883</td>
</tr>
<tr class="even">
<td align="right">117.2736</td>
<td align="right">35.65322</td>
<td align="left">泗水县</td>
<td align="left">district</td>
<td align="left">0537</td>
<td align="left">370831</td>
</tr>
<tr class="odd">
<td align="right">116.5953</td>
<td align="right">35.41483</td>
<td align="left">任城区</td>
<td align="left">district</td>
<td align="left">0537</td>
<td align="left">370811</td>
</tr>
<tr class="even">
<td align="right">116.3429</td>
<td align="right">35.39810</td>
<td align="left">嘉祥县</td>
<td align="left">district</td>
<td align="left">0537</td>
<td align="left">370829</td>
</tr>
<tr class="odd">
<td align="right">116.0896</td>
<td align="right">35.80184</td>
<td align="left">梁山县</td>
<td align="left">district</td>
<td align="left">0537</td>
<td align="left">370832</td>
</tr>
<tr class="even">
<td align="right">116.6500</td>
<td align="right">34.99771</td>
<td align="left">鱼台县</td>
<td align="left">district</td>
<td align="left">0537</td>
<td align="left">370827</td>
</tr>
<tr class="odd">
<td align="right">116.3104</td>
<td align="right">35.06977</td>
<td align="left">金乡县</td>
<td align="left">district</td>
<td align="left">0537</td>
<td align="left">370828</td>
</tr>
<tr class="even">
<td align="right">116.8290</td>
<td align="right">35.55644</td>
<td align="left">兖州区</td>
<td align="left">district</td>
<td align="left">0537</td>
<td align="left">370812</td>
</tr>
<tr class="odd">
<td align="right">117.1286</td>
<td align="right">34.80953</td>
<td align="left">微山县</td>
<td align="left">district</td>
<td align="left">0537</td>
<td align="left">370826</td>
</tr>
</tbody>
</table>
</td>
</tr></tbody></table>
<p><code>extractAdmin</code> is created to get results as tibble.</p>
</div>
<div id="convert-coordinate-point-from-other-coordinate-system-to-autonavi" class="section level3">
<h3 class="hasAnchor">
<a href="#convert-coordinate-point-from-other-coordinate-system-to-autonavi" class="anchor"></a>Convert coordinate point from other coordinate system to AutoNavi</h3>
<p>get results of reverse geocoding, by <code>convertCoord</code> function, here is how to convert coordinate from gps to AutoNavi.</p>
<p><strong>Please not, this is still a very experimental function because I have no experience at converting coordinates. The implementation of this input method is not as delicate as I expect. If you have any good idea, please let me know or just fork repo and pull a reques.</strong></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/convertCoord.html">convertCoord</a></span><span class="op">(</span><span class="st">"116.481499,39.990475"</span>, coordsys <span class="op">=</span> <span class="st">"gps"</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">lng</th>
<th align="right">lat</th>
</tr></thead>
<tbody><tr class="odd">
<td align="right">116.4876</td>
<td align="right">39.99175</td>
</tr></tbody>
</table>
<p><code>extractConvertCoord</code> is created to get result as data.table.</p>
</div>
</div>
<div id="bug-report" class="section level2">
<h2 class="hasAnchor">
<a href="#bug-report" class="anchor"></a>Bug report</h2>
<p>It’s very common for API upgrades to make the downstream application, like amapGeocode,which is unavailable. Feel free to <a href="mailto://chenhan28@gmail.com">let me know</a> once it’s broken or just open an <a class="github-button" href="https://github.com/womeimingzi11/amapGeocode/issues" data-color-scheme="no-preference: light; light: light; dark: dark;" data-size="large" aria-label="Issue womeimingzi11/amapGeocode on GitHub">Issue</a>.</p>
</div>
<div id="acknowledgements" class="section level2">
<h2 class="hasAnchor">
<a href="#acknowledgements" class="anchor"></a>Acknowledgements</h2>
<p>Hex Sticker was created by <a href="https://github.com/GuangchuangYu/hexSticker">hexSticker package</a> with the world data from <a href="https://CRAN.R-project.org/package=rnaturalearth">rnaturalearth</a>.</p>
</div>
<div id="code-of-conduct" class="section level2">
<h2 class="hasAnchor">
<a href="#code-of-conduct" class="anchor"></a>Code of Conduct</h2>
<p>Please note that the amapGeocode project is released with a <a href="https://contributor-covenant.org/version/2/0/CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=amapGeocode">https://​cloud.r-project.org/​package=amapGeocode</a>
</li>
<li>Browse source code at <br><a href="https://github.com/womeimingzi11/amapGeocode/">https://​github.com/​womeimingzi11/​amapGeocode/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/womeimingzi11/amapGeocode/issues">https://​github.com/​womeimingzi11/​amapGeocode/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Han Chen <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=amapGeocode"><img src="https://cranlogs.r-pkg.org/badges/grand-total/amapGeocode?color=blue" alt="Total downloads badge"></a></li>
<li><a href="https://CRAN.R-project.org/package=amapGeocode"><img src="https://www.r-pkg.org/badges/version/amapGeocode" alt="CRAN status"></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#maturing"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="Lifecycle: maturing"></a></li>
<li><a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a></li>
<li><a href="https://zenodo.org/badge/latestdoi/297431889"><img src="https://zenodo.org/badge/297431889.svg" alt="DOI"></a></li>
<li><a href="https://codecov.io/gh/womeimingzi11/amapGeocode?branch=master"><img src="https://codecov.io/gh/womeimingzi11/amapGeocode/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/womeimingzi11/amapGeocode/actions"><img src="https://github.com/womeimingzi11/amapGeocode/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Han Chen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
