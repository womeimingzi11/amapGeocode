<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to amapGeocode • amapGeocode</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to amapGeocode">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">amapGeocode</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Introduction_to_amapGeocode.html">Introduction to amapGeocode</a></li>
    <li><a class="dropdown-item" href="../articles/Introduction_to_Shiny_App.html">Interactive Operations with Shiny GUI</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/womeimingzi11/amapGeocode/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Introduction to amapGeocode</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/womeimingzi11/amapGeocode/blob/master/vignettes/Introduction_to_amapGeocode.Rmd" class="external-link"><code>vignettes/Introduction_to_amapGeocode.Rmd</code></a></small>
      <div class="d-none name"><code>Introduction_to_amapGeocode.Rmd</code></div>
    </div>

    
    
<!-- Place this tag in your head or just before your close body tag. -->
<script async defer src="https://buttons.github.io/buttons.js"></script><p>Geocoding and Reverse Geocoding Services are widely used to provide
data about coordinate and location information, including longitude,
latitude, formatted location name, administrative region with different
levels. There are some package can provide geocode service such as <a href="https://CRAN.R-project.org/package=tidygeocoder" class="external-link">tidygeocoder</a>,
<a href="https://github.com/badbye/baidumap" class="external-link">baidumap</a> and <a href="https://github.com/ChrisMuir/baidugeo" class="external-link">baidugeo</a>. However, some
of them not always provide precise information in China, and some of
them is unavailable with upgrade backend API.</p>
<p>amapGeocode is built to provide high precise geocoding and reverse
geocoding service which powered by AutoNavi Map API service. Here are
two main functions to use are <code><a href="../reference/getCoord.html">getCoord()</a></code> which takes a
character location name as an input and <code><a href="../reference/getLocation.html">getLocation()</a></code> which
takes two numeric longitude and latitude values as inputs.</p>
<p>The <code><a href="../reference/getCoord.html">getCoord()</a></code> function extracts coordinate information
from input character location name and output the result as
<code>tibble</code>, <code>XML</code> or <code>JSON (as list)</code>.
And the <code><a href="../reference/getLocation.html">getLocation()</a></code> function extracts location
information from input numeric longitude and latitude values and output
the result as <code>tibble</code>, <code>XML</code> or
<code>JSON (as list)</code>. With the <code>tibble</code> format as
output, it’s highly readable and easy to be used to <code>tidy</code>
workflow.</p>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="geocoding">Geocoding<a class="anchor" aria-label="anchor" href="#geocoding"></a>
</h3>
<p>Before start geocoding and reverse geocoding, please apply a <a href="https://lbs.amap.com/dev/" class="external-link">AutoNavi Map API Key</a>. Set
<code>amap_key</code> globally by following command:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>amap_key <span class="op">=</span> <span class="st">'REPLACE THIS BY YOUR KEY'</span><span class="op">)</span></span></code></pre></div>
<p>Then get result of geocoding, by <code>getCoord</code> function.</p>
<p>For bulk workloads, amapGeocode uses curl-multi parallelism (via
{httr2}) and applies safe defaults that respect AutoNavi’s QPS limit (3
requests/second). You can tune concurrency/throttling with
<code><a href="../reference/amap_config.html">amap_config()</a></code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://womeimingzi11.github.io/amapGeocode/">amapGeocode</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Defaults are safe, but you can set them explicitly</span></span>
<span><span class="fu"><a href="../reference/amap_config.html">amap_config</a></span><span class="op">(</span>throttle <span class="op">=</span> <span class="cn">TRUE</span>, max_active <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCoord.html">getCoord</a></span><span class="op">(</span><span class="st">'四川省博物馆'</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></code></pre></div>
<p>The response we get from <strong>AutoNavi Map API</strong> is
<strong>JSON</strong> or <strong>XML</strong>. For readability, we
transform them to <a href="https://CRAN.R-project.org/package=tibble" class="external-link"><code>tibble</code></a>,
by setting <code>output</code> argument as <code>tibble</code> by
default.</p>
<p>If anyone want to get response as <strong>JSON</strong> or
<strong>XML</strong>, just set <code>output = "JSON"</code> or
<code>output = "XML"</code>. If anyone want to extract information from
<strong>JSON</strong> or <strong>XML</strong>, the result can further be
parsed by <code>extractCoord</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/getCoord.html">getCoord</a></span><span class="op">(</span><span class="st">'四川省博物馆'</span>, output <span class="op">=</span> <span class="st">'XML'</span><span class="op">)</span></span>
<span><span class="va">res</span></span></code></pre></div>
<p><code>extractCoord</code> is created to get result as a tibble.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span></span>
<span><span class="va">tb</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/extractCoord.html">extractCoord</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">tb</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="reverse-geocoding">Reverse Geocoding<a class="anchor" aria-label="anchor" href="#reverse-geocoding"></a>
</h3>
<p>get result of reverse geocoding, by <code>getLocation</code>
function.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Safe defaults for bulk requests</span></span>
<span><span class="fu"><a href="../reference/amap_config.html">amap_config</a></span><span class="op">(</span>throttle <span class="op">=</span> <span class="cn">TRUE</span>, max_active <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getLocation.html">getLocation</a></span><span class="op">(</span><span class="fl">104.043284</span>, <span class="fl">30.666864</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span></span>
<span>   <span class="fu"><a href="../reference/getLocation.html">getLocation</a></span><span class="op">(</span><span class="fl">104.0339</span>, <span class="fl">30.66069</span>, output <span class="op">=</span> <span class="st">'XML'</span><span class="op">)</span></span>
<span><span class="va">res</span></span></code></pre></div>
<p><code>extractLocation</code> is created to get result as a
tibble.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tb</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/extractLocation.html">extractLocation</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">tb</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="get-subordinate-administrative-region">Get Subordinate Administrative Region<a class="anchor" aria-label="anchor" href="#get-subordinate-administrative-region"></a>
</h3>
<p>get result of reverse geocoding, by <code>getAdmin</code>
function.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/getAdmin.html">getAdmin</a></span><span class="op">(</span><span class="st">'四川省'</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span></span>
<span>   <span class="fu"><a href="../reference/getAdmin.html">getAdmin</a></span><span class="op">(</span><span class="st">'四川省'</span>, output <span class="op">=</span> <span class="st">'XML'</span><span class="op">)</span></span>
<span><span class="va">res</span></span></code></pre></div>
<p><code>extractAdmin</code> is created to get result as a tibble.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span></span>
<span><span class="va">tb</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/extractAdmin.html">extractAdmin</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">tb</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="convert-coordinate-point-from-other-coordinate-system-to-autonavi">Convert coordinate point from other coordinate system to
AutoNavi<a class="anchor" aria-label="anchor" href="#convert-coordinate-point-from-other-coordinate-system-to-autonavi"></a>
</h3>
<p>get result of reverse geocoding, by <code>convertCoord</code>
function, here is how to convert coordinate from gps to AutoNavi</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/convertCoord.html">convertCoord</a></span><span class="op">(</span><span class="st">"103.9960,30.6475"</span>, coordsys <span class="op">=</span> <span class="st">"gps"</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/convertCoord.html">convertCoord</a></span><span class="op">(</span><span class="st">'116.481499,39.990475'</span>,coordsys <span class="op">=</span> <span class="st">'gps'</span>, output <span class="op">=</span> <span class="st">'JSON'</span><span class="op">)</span></span>
<span><span class="va">res</span></span></code></pre></div>
<p><code>extractConvertCoord</code> is created to get result as a
tibble.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tb</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/extractConvertCoord.html">extractConvertCoord</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">tb</span><span class="op">)</span></span></code></pre></div>
<p>For more functions and improvements, Coming Soon!</p>
</div>
</div>
<div class="section level2">
<h2 id="bug-report">Bug report<a class="anchor" aria-label="anchor" href="#bug-report"></a>
</h2>
<p>It’s very common for API upgrades to make the downstream application,
like amapGeocode, to be unavailable. Feel free to <a href="mailto://chenhan28@gmail.com">let me know</a> once it’s broken or
just open an
<a class="external-link github-button" href="https://github.com/womeimingzi11/amapGeocode/issues" data-color-scheme="no-preference: light; light: light; dark: dark;" data-size="large" aria-label="Issue womeimingzi11/amapGeocode on GitHub">Issue</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Han Chen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
